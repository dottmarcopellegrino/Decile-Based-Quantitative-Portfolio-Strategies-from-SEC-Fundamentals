# ğŸ“Š Value vs Growth: SEC-Filings-Based Backtest (2009â€“2025)

This repository provides a complete and reproducible pipeline for evaluating **fundamental-based equity strategies** (Value and Momentum) using raw 10-K filings from the SEC EDGAR system. No commercial datasets (e.g. Compustat or CRSP) are required.

The pipeline extracts accounting data directly from `sub.txt` and `num.txt`, maps CIK to tickers, downloads historical price data, forms portfolios based on valuation and momentum deciles, and performs out-of-sample backtests over 2009â€“2025.

---

## ğŸ“ Folder Structure

.
â”œâ”€â”€ run_pipeline.py # Main execution file for the entire pipeline
â”œâ”€â”€ output files (CSV) in: # /Dataset Analisi Paper/
â”‚ â”œâ”€â”€ fundamentals_raw_2009_2025.csv
â”‚ â”œâ”€â”€ fundamentals_with_ticker_2009_2025.csv
â”‚ â”œâ”€â”€ stock_prices_monthly_long_2009_2025.csv
â”‚ â”œâ”€â”€ indicators_2009_2025.csv
â”‚ â”œâ”€â”€ portfolios_2009_2025.csv
â”‚ â”œâ”€â”€ backtest_2009_2025.csv
â”‚ â”œâ”€â”€ backtest_by_year_2009_2025.csv
â”‚ â”œâ”€â”€ backtest_spreads_2009_2025.csv
â”‚ â””â”€â”€ monthly_portfolio_returns.csv
â”œâ”€â”€ figs/
â”‚ â”œâ”€â”€ fig1_portfolio_returns.png
â”‚ â”œâ”€â”€ fig2_boxplot_returns.png
â”‚ â””â”€â”€ fig3_long_short_spreads.png
â””â”€â”€ README.md

yaml
Copia codice

---

## âš™ï¸ Dependencies

Install Python dependencies with:

```bash
pip install -r requirements.txt
Main packages:

pandas, numpy, matplotlib, seaborn

yfinance

statsmodels

scipy, tqdm

ğŸš€ How to Run
All steps are automated in run_pipeline.py.

1. Set your base directory
Edit the BaseConfig class in the script to match your local folder structure (where your sub.txt and num.txt files are).

python
Copia codice
base_dir: Path = Path("/your/local/path/to/SEC/files")
ticker_csv: Path = Path("/your/local/path/to/Ticker.csv")
2. Run the pipeline
bash
Copia codice
python run_pipeline.py
This will:

Parse all available 10-K SEC filings

Extract fundamentals and calculate EPS, PE, ROE, etc.

Map CIKs to stock tickers

Download monthly prices from Yahoo Finance

Construct decile-based value and momentum portfolios

Run out-of-sample backtests for FY+1

Save all results as CSVs

Generate a manifest.json with paths and shapes

ğŸ“ˆ Figures and Analysis
After running the pipeline, you can run the separate scripts or notebooks provided to:

Plot annual returns and spreads (fig1, fig2, fig3)

Perform t-tests and Wilcoxon rank-sum tests for statistical validation

Run Famaâ€“French 3-factor regressions on excess returns

Compare results across two subperiods: 2009â€“2016 vs 2017â€“2024

ğŸ§ª Key Features
âœ… No commercial data â€” everything from SEC EDGAR + Yahoo Finance

âœ… Automatically computes compound annual returns from monthly data

âœ… Handles missing or problematic tickers gracefully

âœ… Portfolio returns are winsorized to reduce outlier impact

âœ… Compatible with Python 3.9+

ğŸ“ Data Sources
SEC EDGAR 10-K filings: raw sub.txt and num.txt (downloaded manually or via OpenEDGAR scripts)

Yahoo Finance: monthly prices

Kenneth French Data Library: Famaâ€“French factors (US_Factors.csv)

ğŸ“Œ Citation
If you use this code, please cite:

Pellegrino, M. (2025). Accounting-Based Anomalies Revisited: A Ground-Truth, Out-of-Sample Evaluation from SEC Filings. SSRN Working Paper.

ğŸ“¬ Contact
For questions or contributions, feel free to open an issue or contact [dott.marco.pellegrino@gmail.com].
